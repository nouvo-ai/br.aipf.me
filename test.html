<!DOCTYPE html>
<html>
<head>
    <title>이미지 업로드 테스트</title>
</head>
<body>
    <h1>이미지 업로드 테스트</h1>
    <form action="https://bapi-347607ff9fac.herokuapp.com/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file">
        <input type="submit" value="이미지 업로드">
    </form>

    <script>
        const form = document.querySelector('form');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(form);

            try {
                const response = await fetch("https://bapi-347607ff9fac.herokuapp.com/upload/", {
                    method: "POST",
                    body: formData,
                });

                if (response.ok) {
                    const data = await response.json();
                    alert(data.message);

                    // 특정 URL로 리디렉션
                    window.location.href = "/loading.html";  // 원하는 URL로 변경
                } else {
                    alert("업로드에 실패했습니다.");
                }
            } catch (error) {
                console.error("에러 발생:", error);
                alert("에러가 발생했습니다.");
            }
        });
    </script>
</body>
</html>
